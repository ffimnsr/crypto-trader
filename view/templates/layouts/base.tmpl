<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Crypto Trader</title>
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre.min.css">
  </head>
  <body>
    <p id="output"></p>
    <script>
      let loc = window.location
      let uri = 'ws:'
      if (loc.protocol === 'https:') {
        uri = 'wss:'
      }
      uri += '//' + loc.host
      uri += loc.pathname + 'ws'

      let ws = new WebSocket(uri)
      ws.onopen = () => {
        console.log('Connected')
      }

      ws.onmessage = (e) => {
        let out = document.getElementById('output')
        out.innerHTML += e.data + '<br>'
      }

      setInterval(() => {
        ws.send('Hello, Server!')
      }, 1000)
    </script>
  </body>
</html>
